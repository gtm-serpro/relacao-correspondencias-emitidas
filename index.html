<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relação de Correspondências Emitidas - CARF</title>
    
    <link rel="stylesheet" href="https://docs-ds.estaleiro.serpro.gov.br/govbr-ds-core/dist/core.min.css">
    <link rel="stylesheet" href="https://cdngovbr-ds.estaleiro.serpro.gov.br/design-system/fonts/rawline/css/rawline.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Container Principal -->
    <div class="container-fluid mb-5">
        <!-- Card Principal -->
        <div class="">
            <div class="card-header">
                <div class="d-flex align-items-center">
                    <i class="fas fa-envelope mr-2" style="font-size: 1.5rem; color: #1351B4;"></i>
                    <h4 class="">Relação de Correspondências Emitidas</h4>
                </div>
            </div>

            <div class="card-content">
                <!-- Process Info -->
                <div class="process-info">
                    <i class="fas fa-folder-open" style="font-size: 1.5rem; color: #1351B4;"></i>
                    <div>
                        <div class="process-info-label">Processo</div>
                        <div class="process-info-value">10580.123456/2024-78</div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="controls">
                    <div class="controls-info">
                        Exibindo <strong id="countDisplay">4 correspondências</strong>
                    </div>
                    <label class="controls-checkbox">
                        <input type="checkbox" id="exibirDevolvidas">
                        <span>Exibir correspondências devolvidas e canceladas</span>
                    </label>
                </div>

                <!-- Correspondence Cards -->
                <div id="correspondenceList">
                    
                    <!-- Card 1 - Estrutura Melhorada -->
                    <div class="correspondence-card">
                        <div class="card-main" onclick="toggleCard(this)">
                            <div class="card-main-row">
                                <div class="card-header-info">
                                    <div class="card-number-inline">
                                        <span class="card-number-label">Nº</span>
                                        <span class="card-number-value">00005</span>
                                    </div>
                                    <div class="card-datetime">
                                        <i class="far fa-clock"></i>
                                        <a href="#" onclick="event.stopPropagation();">19/12/2025 14:35</a>
                                    </div>
                                </div>
                                
                                <div class="card-main-content">
                                    <div class="card-destinatario">
                                        <i class="far fa-user"></i>
                                        <span class="tooltip-trigger">
                                            João Silva Santos
                                            <span class="tooltip-content">CPF: 123.456.789-00</span>
                                        </span>
                                    </div>
                                    
                                    <div class="card-badges">
                                        <span class="badge badge-intimacao">
                                            <i class="fas fa-bell"></i>
                                            Intimação
                                        </span>
                                        <span class="badge badge-natureza">
                                            <i class="fas fa-mail-bulk"></i>
                                            Postal-Manual
                                        </span>
                                        <span class="badge badge-sucesso">
                                            <i class="fas fa-check-circle"></i>
                                            Efetivada
                                        </span>
                                        <span class="alert-icon">
                                            <i class="fas fa-exclamation-triangle"></i>
                                            <span class="tooltip-content">
                                                A ciência foi efetivada provisoriamente pelo destinatário ter tido acesso aos documentos da intimação. A efetivação definitiva ocorrerá quando o Aviso de Recebimento (AR) for juntado ao processo.
                                            </span>
                                        </span>
                                        <span class="badge badge-pendente">
                                            <i class="far fa-clock"></i>
                                            Manifestação Pendente
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="card-expand">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card-details">
                            <div class="details-grid">
                                <div class="detail-item">
                                    <span class="detail-label">Data da Cientificação</span>
                                    <span class="detail-value">15/12/2025</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Prazo de Manifestação</span>
                                    <span class="detail-value">30 dias</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Data Final de Manifestação</span>
                                    <span class="detail-value">14/01/2026</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Data da Manifestação</span>
                                    <span class="detail-value empty">Não manifestado</span>
                                </div>
                            </div>
                            
                            <div class="documents-section">
                                <div class="documents-title">
                                    <i class="fas fa-paperclip"></i>
                                    Documentos da Correspondência
                                </div>
                                <ul class="document-list">
                                    <li class="document-item principal">
                                        <i class="fas fa-file-pdf"></i>
                                        <a href="#" onclick="event.stopPropagation();">Despacho_2024_001.pdf</a>
                                        <span class="badge badge-intimacao">PRINCIPAL</span>
                                    </li>
                                    <li class="document-item">
                                        <i class="fas fa-file-pdf"></i>
                                        <a href="#" onclick="event.stopPropagation();">Anexo_Tecnico.pdf</a>
                                    </li>
                                </ul>
                            </div>
                            
                            <div class="actions-section">
                                <button class="action-btn action-btn-primary" onclick="event.stopPropagation(); verDetalhamento(5)">
                                    <i class="fas fa-file-alt"></i>
                                    Ver Detalhamento Completo
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); downloadDoc('carta')">
                                    <i class="fas fa-envelope"></i>
                                    Carta de Orientações
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); downloadDoc('ciencia')">
                                    <i class="fas fa-file-alt"></i>
                                    Docs. da Ciência
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); downloadDoc('ciencia-termo')">
                                    <i class="fas fa-file-signature"></i>
                                    Docs. com Termo
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); downloadDoc('termo')">
                                    <i class="fas fa-certificate"></i>
                                    Termo de Ciência
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); alterarPrazo(5)">
                                    <i class="fas fa-calendar-edit"></i>
                                    Alterar Prazo
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); efetivarManifestacao(5)">
                                    <i class="fas fa-check-circle"></i>
                                    Efetivar Manifestação
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); desfazerCiencia(5)">
                                    <i class="fas fa-undo"></i>
                                    Desfazer Ciência
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); desfazerManifestacao(5)">
                                    <i class="fas fa-undo-alt"></i>
                                    Desfazer Manifestação
                                </button>
                                
                                <button class="action-btn" onclick="event.stopPropagation(); exibirHistorico(5)">
                                    <i class="fas fa-history"></i>
                                    Histórico
                                </button>
                                
                                <button class="action-btn action-btn-danger" onclick="event.stopPropagation(); cancelarCorrespondencia(5)">
                                    <i class="fas fa-times-circle"></i>
                                    Cancelar
                                </button>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Pagination -->
                <div class="br-pagination mt-4" data-total="3" data-current="1">
                    <div class="pagination-per-page">
                        <div class="br-select">
                            <label>Exibir</label>
                            <select>
                                <option value="10">10</option>
                                <option value="20" selected>20</option>
                                <option value="50">50</option>
                            </select>
                        </div>
                    </div>
                    <nav class="pagination-nav" aria-label="Paginação">
                        <ul>
                            <li><button class="br-button circle" type="button" disabled><i class="fas fa-angle-left"></i></button></li>
                            <li><button class="br-button circle active" type="button">1</button></li>
                            <li><button class="br-button circle" type="button">2</button></li>
                            <li><button class="br-button circle" type="button">3</button></li>
                            <li><button class="br-button circle" type="button"><i class="fas fa-angle-right"></i></button></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <script src="https://docs-ds.estaleiro.serpro.gov.br/govbr-ds-core/dist/core-init.js"></script>
    <!-- No final do body, antes do fechamento -->
    <script src="dados-correspondencias.js"></script>
    <script src="renderizador-cards.js"></script>
    <script src="script.js"></script>
    <script>
        // Inicializa o renderizador
        const renderer = new CorrespondenciaRenderer('correspondenceList');
        
        // Carrega os dados
        renderer.carregarDados(correspondenciasData);
        
        // Event listener para checkbox de devolvidas
        document.getElementById('exibirDevolvidas').addEventListener('change', function() {
            renderer.toggleDevolvidas(this.checked);
        });
        
        // Exemplo de como adicionar novos cards dinamicamente
        function adicionarNovaCorrespondencia(novaCorresp) {
            correspondenciasData.unshift(novaCorresp);
            renderer.carregarDados(correspondenciasData);
        }
        
        // Exemplo de como remover um card
        function removerCorrespondencia(id) {
            const index = correspondenciasData.findIndex(c => c.id === id);
            if (index > -1) {
                correspondenciasData.splice(index, 1);
                renderer.carregarDados(correspondenciasData);
            }
        }
        
        // Exemplo de ordenação
        function ordenarPor(campo) {
            renderer.ordenar(campo, 'desc');
        }
</script>
</body>
</html>